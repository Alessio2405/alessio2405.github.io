---
interface Props {
  title: string;
  description?: string;
}

const { title, description = 'n0w.me - Terminal style personal site' } = Astro.props;
const currentPath = Astro.url.pathname === '/' ? '~' : Astro.url.pathname;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=JetBrains+Mono:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <title>{title}</title>
    <script is:inline>
      const theme = localStorage.getItem('theme');
      if (theme) document.documentElement.setAttribute('data-theme', theme);
    </script>
  </head>
  <body>
    <div class="min-h-screen max-w-2xl mx-auto px-6 py-8">
      <header class="flex justify-between items-center mb-8">
        <div class="text-[var(--fg-dim)] text-sm">$ cd {currentPath}</div>
        <button class="theme-switch" id="theme-toggle" title="Toggle theme">
          <span id="theme-label">terminal</span>
        </button>
      </header>

      <main>
        <slot />
      </main>

      <footer
        class="mt-16 pt-4 border-t border-[var(--border)] text-xs text-[var(--fg-dim)]"
      >
        <p>
          <a href="/">~</a> · <a href="/blog">/blog</a> ·
          <a href="/projects">/projects</a>
        </p>
        <p class="mt-2">&copy; {new Date().getFullYear()} n0w.me</p>
      </footer>
    </div>

    <script is:inline>
      const toggle = document.getElementById('theme-toggle');
      const label = document.getElementById('theme-label');
      
      function updateLabel() {
        const current = document.documentElement.getAttribute('data-theme');
        label.textContent = current === 'terminal' ? 'soft' : 'terminal';
      }
      
      updateLabel();
      
      toggle.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme');
        const next = current === 'terminal' ? '' : 'terminal';
        
        if (next) {
          document.documentElement.setAttribute('data-theme', next);
          localStorage.setItem('theme', next);
        } else {
          document.documentElement.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        }
        
        updateLabel();
      });
    </script>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
